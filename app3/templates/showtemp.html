<html>
{% load static  %}
<head>
	
	<link href=”http://cdn.pydata.org/bokeh/release/bokeh-3.4.0.min.css
		" rel=”stylesheet” type=”text/css”>
	<link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-3.4.0.min.css"
		rel=”stylesheet” type=”text/css”>
</head>
<body>
	<div id="download" style="margin-right: 5px;width:30px"><a href="#" onclick="downloadData()">
		<img src="{% static "img/download.png" %}" alt="Download Data" width="24" height="24">
	</a></div>
	
			<div class="col">
			<div class="p-3 border bg-light">
				{{ div| safe}}
			</div>
			</div>
</body>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-3.4.0.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.4.0.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.4.0.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-3.4.0.min.js"></script>
{{script| safe}}

<script>
	function downloadData() {
		var csvData = "{{ csv_data|escapejs }}";
		var encodedUri = encodeURI("data:text/csv;charset=utf-8," + csvData);
		var link = document.createElement("a");
		link.setAttribute("href", encodedUri);
		link.setAttribute("download", "precipitation_data.csv");
		document.body.appendChild(link);
		link.click();
		document.body.removeChild(link);
	}
	</script>
</html>
